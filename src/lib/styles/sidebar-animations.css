/* ========================================
   СОВРЕМЕННЫЕ АНИМАЦИИ САЙДБАРА
   ======================================== */

/* CSS переменные для анимаций */
:root {
	--sidebar-duration: 0.25s;
	--sidebar-easing: cubic-bezier(0.4, 0.0, 0.2, 1); /* Material Design Standard */
	--sidebar-easing-smooth: cubic-bezier(0.0, 0.0, 0.2, 1); /* Material Design Deceleration */
	--sidebar-easing-emphasized: cubic-bezier(0.2, 0.0, 0, 1); /* Material Design Emphasized */
}

/* ========================================
   БАЗОВЫЕ АНИМАЦИИ САЙДБАРА
   ======================================== */

/* Плавная анимация ширины с эффектом */
.sidebar {
	transition: width var(--sidebar-duration) var(--sidebar-easing);
}

/* Плавные переходы для всех элементов сайдбара */
.nav-button {
	transition: 
		width var(--sidebar-duration) var(--sidebar-easing),
		height var(--sidebar-duration) var(--sidebar-easing),
		padding var(--sidebar-duration) var(--sidebar-easing),
		background-color 0.2s var(--sidebar-easing),
		color 0.2s var(--sidebar-easing),
		justify-content var(--sidebar-duration) var(--sidebar-easing);
}

.sidebar-logo {
	transition: 
		width var(--sidebar-duration) var(--sidebar-easing),
		height var(--sidebar-duration) var(--sidebar-easing),
		transform 0.2s var(--sidebar-easing);
}

/* Анимация transform для мобильных устройств */
.sidebar--mobile {
	transition: transform var(--sidebar-duration) var(--sidebar-easing);
}

/* ========================================
   АНИМАЦИИ КОНТЕНТА
   ======================================== */

/* Анимации заголовка сайдбара */
.sidebar-header {
	transition: 
		padding var(--sidebar-duration) var(--sidebar-easing),
		justify-content var(--sidebar-duration) var(--sidebar-easing);
}

/* Анимации контента сайдбара */
.sidebar-nav,
.sidebar-footer {
	transition: padding var(--sidebar-duration) var(--sidebar-easing);
}

/* Плавная анимация user-info */
.user-info {
	transition: 
		justify-content var(--sidebar-duration) var(--sidebar-easing),
		gap var(--sidebar-duration) var(--sidebar-easing);
}

/* ========================================
   АНИМАЦИИ КНОПОК И ЭЛЕМЕНТОВ
   ======================================== */

/* Базовые анимации кнопок */
.room-item {
	transition: 
		background-color 0.2s var(--sidebar-easing),
		color 0.2s var(--sidebar-easing),
		transform 0.2s var(--sidebar-easing);
}

.room-item:hover {
	background-color: #2A2A2A;
}

/* Анимации иконок - полное скрытие при переключении */
.nav-icon,
.room-icon {
	filter: brightness(0) invert(1);
}

/* Иконки при смене состояния: плавное скрытие и появление в стиле Material Design */
.sidebar--mini .nav-icon {
	animation: iconFadeOutInMini 0.35s cubic-bezier(0.4, 0.0, 0.2, 1);
}

.sidebar--expanded .nav-icon {
	animation: iconFadeOutInExpanded 0.35s cubic-bezier(0.4, 0.0, 0.2, 1);
}

@keyframes iconFadeOutInMini {
	0% {
		opacity: 0.5;
	}
	15% {
		opacity: 0;
	}
	60% {
		opacity: 0;
	}
	100% {
		opacity: 0.5;
	}
}

@keyframes iconFadeOutInExpanded {
	0% {
		opacity: 0.5;
	}
	15% {
		opacity: 0;
	}
	60% {
		opacity: 0;
	}
	100% {
		opacity: 0.5;
	}
}

.nav-button:hover .nav-icon,
.room-item:hover .nav-icon {
	opacity: 1 !important;
}

/* Для primary кнопок - полная видимость */
.sidebar--mini .nav-button--primary .nav-icon {
	animation: iconFadeOutInMiniPrimary 0.35s cubic-bezier(0.4, 0.0, 0.2, 1);
}

.sidebar--expanded .nav-button--primary .nav-icon {
	animation: iconFadeOutInExpandedPrimary 0.35s cubic-bezier(0.4, 0.0, 0.2, 1);
}

@keyframes iconFadeOutInMiniPrimary {
	0% {
		opacity: 1;
	}
	15% {
		opacity: 0;
	}
	60% {
		opacity: 0;
	}
	100% {
		opacity: 1;
	}
}

@keyframes iconFadeOutInExpandedPrimary {
	0% {
		opacity: 1;
	}
	15% {
		opacity: 0;
	}
	60% {
		opacity: 0;
	}
	100% {
		opacity: 1;
	}
}

/* ========================================
   АНИМАЦИИ ТЕКСТА
   ======================================== */

/* Плавное появление/исчезновение текста - Material Design стиль */
.nav-button span,
.user-nickname {
	white-space: nowrap;
	transition: 
		opacity 0.2s var(--sidebar-easing-emphasized),
		width var(--sidebar-duration) var(--sidebar-easing);
}

/* При сворачивании текст плавно исчезает */
.sidebar--mini .nav-button span,
.sidebar--mini .user-nickname {
	opacity: 0;
	width: 0;
	overflow: hidden;
	transition: 
		opacity 0.15s var(--sidebar-easing-emphasized),
		width var(--sidebar-duration) var(--sidebar-easing);
}

/* При раскрытии текст плавно появляется с задержкой */
.sidebar--expanded .nav-button span,
.sidebar--expanded .user-nickname {
	opacity: 1;
	width: auto;
	transition: 
		opacity 0.25s var(--sidebar-easing-smooth) 0.1s,
		width var(--sidebar-duration) var(--sidebar-easing);
}

/* ========================================
   BACKDROP АНИМАЦИИ
   ======================================== */

/* Анимация backdrop для мобильных устройств */
.sidebar-backdrop {
	animation: backdropFadeIn var(--sidebar-duration) var(--sidebar-easing);
}

@keyframes backdropFadeIn {
	from {
		opacity: 0;
		backdrop-filter: blur(0px);
	}
	to {
		opacity: 1;
		backdrop-filter: blur(4px);
	}
}

/* ========================================
   МОБИЛЬНЫЕ АНИМАЦИИ
   ======================================== */

/* Плавное появление сайдбара на мобильных */
.sidebar--mobile-open {
	animation: mobileSlideIn var(--sidebar-duration) var(--sidebar-easing);
}

@keyframes mobileSlideIn {
	from {
		opacity: 0;
		transform: translateX(-100%) scale(0.98);
	}
	to {
		opacity: 1;
		transform: translateX(0) scale(1);
	}
}

/* ========================================
   КРАСИВЫЕ HOVER ЭФФЕКТЫ
   ======================================== */

/* Эффект при нажатии */
.nav-button:active,
.room-item:active {
	opacity: 0.8;
	transition: opacity 0.1s var(--sidebar-easing);
}

/* ========================================
   ДОСТУПНОСТЬ
   ======================================== */

/* Отключение анимаций для пользователей с настройками доступности */
@media (prefers-reduced-motion: reduce) {
	.sidebar,
	.sidebar-header,
	.sidebar-nav,
	.sidebar-footer,
	.nav-button,
	.room-item,
	.nav-icon,
	.room-icon,
	.nav-button span,
	.user-nickname,
	.sidebar-backdrop,
	.sidebar--mobile {
		transition: none !important;
		animation: none !important;
	}
}